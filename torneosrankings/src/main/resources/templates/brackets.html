<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{_layout}">
<head>
    <title>Brackets</title>
    <th:block layout:fragment="custom-styles">
        <style>
            body {
                background: linear-gradient(135deg, #3b82f6, #9333ea);
                color: #f9fafb;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 0;
                min-height: 100vh;
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
                font-weight: 800;
                text-align: center;
                color: #ffeb3b;
                text-shadow: 2px 2px 8px rgba(0,0,0,0.6);
                margin-bottom: 1rem;
            }

            .bracket-container {
                max-width: 900px;
                margin: 0 auto;
                padding: 20px;
                background: rgba(30,41,59,0.85);
                border-radius: 12px;
                box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            }

            .mermaid-placeholder {
                background: linear-gradient(135deg, #1e3a8a, #14b8a6);
                padding: 20px;
                border-radius: 10px;
                margin-top: 20px;
                overflow-x: auto;
                color: #fff;
            }

            /* Personalización de nodos Mermaid */
            #myMermaidGraph svg .node rect,
            #myMermaidGraph svg .node circle,
            #myMermaidGraph svg .node ellipse,
            #myMermaidGraph svg .node polygon {
                stroke-width: 3px;
            }

            #myMermaidGraph svg .node text {
                fill: #fff;
                font-weight: bold;
            }

            #myMermaidGraph svg .edgePath .path {
                stroke: #facc15; /* Amarillo vivo */
                stroke-width: 2.5px;
            }

            /* Botón mejorado */
            .compact-button {
                display: inline-flex;
                align-items: center;
                padding: 0.6rem 1.2rem;
                background: linear-gradient(90deg, #22c55e, #84cc16);
                color: #fff;
                border-radius: 0.5rem;
                font-size: 0.95rem;
                font-weight: 700;
                text-decoration: none;
                transition: all 0.3s ease-in-out;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            }

            .compact-button:hover {
                background: linear-gradient(90deg, #4ade80, #a3e635);
                transform: scale(1.05);
                box-shadow: 0 6px 16px rgba(0,0,0,0.4);
            }

            .compact-button svg {
                margin-right: 0.5rem;
                height: 1.25rem;
                width: 1.25rem;
            }

            p {
                color: #d1d5db;
                margin-top: 1rem;
            }
        </style>
    </th:block>
</head>
<body>
<main layout:fragment="content">
    <div class="mb-4" style="text-align:center;">
        <a th:href="@{/dashboard}" class="compact-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
            </svg>
            <span>Regresar al Dashboard</span>
        </a>
    </div>

    <h1>Visualización de Brackets</h1>

    <div class="bracket-container">
        <p class="text-lg">Este es un diagrama de ejemplo de las llaves de tus torneos. Se puede generar dinámicamente con datos reales.</p>

        <div id="myMermaidGraph" class="mermaid-placeholder">
            <pre th:text="${mermaidBracketText}">
                graph TD
                    subgraph Ronda 1
                    P1A(Jugador A) --> M1;
                    P1B(Jugador B) --> M1;
                    P1C(Jugador C) --> M2;
                    P1D(Jugador D) --> M2;
                    end
                    subgraph Ronda 2
                    M1[R1: G. M1] --> M3;
                    M2[R1: G. M2] --> M3;
                    M3[R2: G. M3] --> Final(Final);
                    end
                    Final --> Campeon(🏆 Campeón 🏆);
                    style P1A fill:#06b6d4,stroke:#0891b2,color:#fff;
                    style P1B fill:#f97316,stroke:#c2410c,color:#fff;
                    style P1C fill:#10b981,stroke:#047857,color:#fff;
                    style P1D fill:#ec4899,stroke:#be185d,color:#fff;
                    style M1 fill:#facc15,stroke:#ca8a04,color:#333;
                    style M2 fill:#c084fc,stroke:#9333ea,color:#fff;
                    style M3 fill:#38bdf8,stroke:#0284c7,color:#fff;
                    style Final fill:#fb7185,stroke:#e11d48,color:#fff;
                    style Campeon fill:#22c55e,stroke:#15803d,stroke-width:3px,color:#fff;
            </pre>
        </div>

        <p class="text-sm">Este diagrama es un ejemplo estático. Para datos dinámicos, el contenido se generaría desde tu controlador con Thymeleaf.</p>
    </div>
</main>
</body>
</html>
